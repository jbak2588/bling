rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // 1. 기존 규칙 (모든 문서 접근 허용 - 테스트/개발용)
    // 주의: 이 규칙이 있으면 아래 ai_cases 규칙이 없어도 접근은 되지만,
    // 추후 보안 강화를 위해 분리해두는 것이 좋습니다.
    match /{document=**} {
      allow read, write: if request.auth != null;
    }

    // 2. [NEW] AI 검수 케이스 접근 규칙 (반드시 위 블록 밖으로 빼서 나란히 써야 합니다)
    match /ai_cases/{caseId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
  }
}