

---

## Bling App 개발 일지 (최종 완성본)

- **날짜:** 2025년 7월 4일
    
- **세션 목표:** '데이터 우선' 전략에 따른 핵심 데이터 모델 확립 및 사용자 인증/프로필 관련 기능 안정화
    

### 1. 최종 확립된 핵심 정책

이번 세션을 통해, 우리는 앞으로 절대 흔들리지 않을 다음과 같은 핵심 정책과 설계를 최종적으로 확정했습니다.

- **데이터 모델 우선 전략 (Data-First Strategy)**: 모든 UI 기능 구현에 앞서, **`UserModel`, `PostModel`, `ProductModel`의 데이터 구조를 완벽하게 확립**하고, 이 모델에 맞는 깨끗한 샘플 데이터를 구축하는 것을 최우선 원칙으로 삼기로 했습니다.
    
- **'ID 배열 참조' 방식 통일**: 사용자와 게시물/상품/찜하기 등 모든 '1 대 N' 관계는, **사용자 문서 내에 해당 문서의 ID를 배열(List)로 저장**하는 방식으로 통일합니다. (예: `users/{uid}/bookmarkedPostIds: ["post_id_1", "post_id_2"]`)
    
- **'GPS 자동 인증' 단일화**: 신규 사용자의 동네 인증은 **수동 주소 검색 기능을 완전히 제거**하고, 오직 **GPS를 통한 자동 인증만을 유일한 방법으로 강제**하여 데이터의 신뢰도를 확보합니다.
    
- **`AppBar` 아이콘 정책 확립**: `HomeScreen`의 `AppBar` 우측 상단에는 **[언어 변경] 아이콘과 [알림] 아이콘을 함께 배치**하여, 개발 편의성과 사용자 접근성을 모두 만족시키기로 했습니다.
    
- **다국어(i18n) 키 구조 표준화**: 기존의 단일 문자열 방식에서 벗어나, `feature.component.property` (예: `login.buttons.google`) 형식의 **계층적(Nested) JSON 구조를 표준으로 확립**했습니다. 이를 통해 다국어 관리의 효율성과 확장성을 확보했습니다.
    
- **디자인 가이드 시스템 적용**: 앱의 기본 폰트를 **`Inter`**로 지정하고, 선택/비선택 상태를 나타내는 **Primary 컬러(`#00A66C`)**와 **TextSecondary 컬러(`#616161`)**를 `TabBar` 등에 적용하여 UI의 시각적 일관성과 완성도를 높였습니다.
    

### 2. 주요 구현 및 리팩토링 완료 내역

위 정책에 따라, 아래 기능들의 기초 공사를 성공적으로 마쳤습니다.

- **데이터 모델 최종화**: `UserModel`(데이팅 프로필 포함), `PostModel`, `ProductModel`의 최종 Dart 코드를 모두 확정했습니다.
    
- **샘플 데이터 구축 완료**: 확정된 모델에 따라 `users`, `posts`, `products` 컬렉션에 대한 **깨끗한 샘플 데이터를 Firestore에 성공적으로 업로드**했습니다.
    
- **인증/온보딩 흐름 안정화**:
    
    - `signup_screen.dart`: 신규 가입 시, `UserModel`의 모든 기본 필드를 포함한 완전한 사용자 문서를 생성하도록 수정했습니다.
        
    - `neighborhood_prompt_screen.dart`: 'GPS 자동 인증' 단일화 정책에 맞춰, 버튼 하나로 모든 동네 인증 절차를 완료하도록 UX 및 로직을 완전히 재설계했습니다.
        
- **`MyBlingScreen` 기능 구현 완료**:
    
    - '내 게시물', '내 판매상품', '관심목록' 3개의 탭 모두, 'ID 배열 참조' 방식에 따라 실제 데이터를 불러와 목록을 보여주는 기능을 완벽하게 구현했습니다.
        
- **`Post` 기능 폴더 구조 재정비**: `feed` 폴더에 흩어져 있던 게시물 관련 모든 파일(`post_detail`, `comment`, `reply` 위젯 등)을 `features/post/` 폴더로 이동하여 구조를 바로잡았습니다.
    

### 3. 다음 세션 진행 계획

이제 데이터, 인증, 사용자 프로필이라는 가장 중요한 3대 기반이 모두 안정화되었습니다. 다음 세션에서는 이 기반 위에서 **Bling 앱의 심장인 'New Feed'(통합 피드) 구현**을 시작하는 것이 가장 바람직합니다.

- **목표**: `feed_screen.dart`에 `posts`와 `products`의 데이터를 함께 불러와, 시간순으로 정렬하여 보여주는 통합 타임라인을 구현합니다.
    
- **활용**: '관심목록' 탭에서 성공적으로 구현했던 "여러 종류의 데이터를 합쳐서 보여주는 로직"을 그대로 활용하여 개발을 진행할 수 있습니다.
    

---




### Bling 앱의 10대 공통 모듈 분류

#### 🏢 1. 핵심 기반 모듈 (Foundation)

이 모듈들은 Bling 앱의 가장 근간이 되는 뼈대입니다. 이 기반이 없으면 다른 어떤 기능도 동작할 수 없습니다.

1. **사용자 & 인증 (User & Auth):** 회원가입, 로그인, 로그아웃 등 모든 사용자 인증 과정을 책임집니다. `UserModel`을 통해 사용자의 모든 정보(프로필, `TrustLevel`, 찜 목록 등)를 관리하는, 우리 앱의 가장 중요한 중심축입니다.
    
2. **위치 & 지역 (Location & Geo):** GPS를 통한 동네 자동 인증, `Provinsi`부터 `Kelurahan`까지 이어지는 계층형 주소 데이터(`locationParts`) 관리, 주소 약어 변환(`Singkatan`) 등 Bling의 '하이퍼로컬' 컨셉을 구현하는 모든 위치 관련 기능을 담당합니다.
    
3. **다국어 & 디자인 (i18n & Design):** `en.json`, `ko.json`, `id.json` 파일을 관리하는 다국어 시스템과 `Inter` 폰트, Primary 컬러 등 앱의 전체적인 시각적 통일성을 책임지는 디자인 시스템입니다.
    

#### ✨ 2. 주요 기능 모듈 (Features)

위의 핵심 기반 위에, 사용자가 직접적으로 경험하는 기능들입니다.

4. **피드 & 게시물 (Feed & Post):** `New Feed`와 `Local Stories`를 포함하여, 모든 게시물의 생성(CRUD), 댓글, 답글, 좋아요, 상세 보기 기능을 총괄합니다.
    
5. **마켓플레이스 (Marketplace):** 중고 상품의 등록, 조회, 필터링, 거래 상태 관리 등 모든 상거래 관련 기능을 담당합니다.
    
6. **친구찾기 & 클럽 & 구인구직 (Social & etc):** 'Find Friend', 'Clubs', 'Jobs' 등 사용자의 프로필과 위치 정보를 기반으로 다른 사용자와 연결되거나 정보를 교류하는 모든 소셜 및 기타 기능들을 포함합니다.
    
7. **채팅 (Chat):** 사용자 간의 1:1 메시징, 읽음 확인, 안 읽은 메시지 수 표시 등 실시간 소통 기능을 담당하는 독립적인 모듈입니다.
    

#### 🛠️ 3. 공통 지원 모듈 (Shared Services)

위의 모든 모듈들이 원활하게 동작하도록 지원하는 보이지 않는 중요한 기능들입니다.

8. **알림 (Notification):** 새로운 댓글, 채팅, 거래 제안 등 앱의 모든 이벤트에 대한 푸시 알림과 인앱 알림을 통합 관리합니다.
    
9. **신고 & 차단 (Safety & Guard):** 불량 사용자 신고, 사용자 차단, 개인정보(Privacy) 설정 등 커뮤니티의 안전을 유지하기 위한 모든 기능을 담당합니다.
    
10. **공용 헬퍼 & 위젯 (Common Helpers & Widgets):** `AddressFormatter`처럼 주소를 변환해주거나, `PostCard`처럼 여러 화면에서 재사용되는 UI 조각, 유효성 검사기(Validator) 등 앱 전반에서 공통으로 사용되는 모든 도구들을 포함합니다.



